version: "2"
settings:
  save_conductor_container: false 
services:
  web:
    from: centos:7
    entrypoint: ['/usr/bin/entrypoint.sh']
    working_dir: /
    user: apache
    command: [/usr/bin/dumb-init, httpd, -DFOREGROUND]
    ports:
    - 8000:8080
    - 4443:8443
    roles:
    - apache-container
    openshift:
      state: present
      deployment:
        force: false 
      routes:
      - port: 8443
        tls:
          termination: passthrough 
        force: false 
    volumes:
      # For host volume to work on OpenShift, 'oc edit scc restricted', and set 'allowHostDirVolumePlugin: true'
      - /Users/chouseknecht/projects/test-mkii/static:/var/www/static
      # named volume
      - static-content:/var/www/static2 
      # empty dir
      - /var/www/static3

volumes:
  static-content:
    docker: {}
    openshift:
      force: false
      state: present
      access_modes:
      - ReadWriteOnce
      requested_storage: 5Gi
  
registries: {}
